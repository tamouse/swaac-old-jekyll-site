<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>TBP: Bistate Booleans in Rails</title>
    <meta name="description" content="The development blog of tamouse">
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="canonical" href="http://swaac.tamouse.org/rails/tbp/2015/05/26/tbp-bistate-booleans-in-rails/">
    <link href="/favicon.png" rel="icon">
</head>

  <body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <div class="full-height-wrapper">
      <div class="two-column-wrapper">
        <aside class="sidebar">

  <header>
    <nav id="" class="" role="navigation">
      <div class="container-fluid">
        <div class="">
          <h2><a class="" href="/">Software as a Craft</a></h2>
        </div>
        <div id="" class="">
          <ul class="">
            
            <li><a href="/pages/learning">Learning</a></li>
            
            <li><a href="/pages/all_posts">Posts</a></li>
            
            <li><a href="/pages">Pages</a></li>
            
            <li><a href="/tags">Tags</a></li>
            
            <li><a href="/categories">Categories</a></li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <footer id="" class="" role="navigation">
    <div class="container-fluid">
      <div class="">
        <a class="" href="http://www.tamouse.org">&copy; 2017 Tamara Temple</a>
      </div>
      <div id="" class="">
        <ul class="">
          <li><a href="//github.com/tamouse">github <i class="fa fa-github"></i></a></li>
          <li><a href="//twitter.com/tamouse">twitter <i class="fa fa-twitter"></i></a></li>
          <li><a href="/feed.xml">subscribe (RSS) <i class="fa fa-rss"></i></a></li>
          <li><a href="/pages/colophon/">Colophon</a></li>
        </ul>
      </div>
    </div>
  </footer>
</aside>

        <main id="main-content" class="container-fluid">
          <header class="page-header">
<h1>TBP: Bistate Booleans in Rails</h1>
May 26, 2015


 &bullet; <ul class="link-list"><li>Categories:</li><li role="presentation"><a href="/categories/rails">rails</a></li><li role="presentation"><a href="/categories/tbp">tbp</a></li></ul>
 &bullet; <ul class="link-list"><li>Tags: </li><li role="presentation"><a href="/tags/tiny-best-practices">tiny-best-practices</a></li> <li role="presentation"><a href="/tags/tbp">tbp</a></li> <li role="presentation"><a href="/tags/rails">rails</a></li> <li role="presentation"><a href="/tags/booleans">booleans</a></li> <li role="presentation"><a href="/tags/bistate">bistate</a></li> <li role="presentation"><a href="/tags/tristate">tristate</a></li> 
</header>

<article>
  <p>Sometimes, the default settings in a framework and associated tools
can lead to trouble. The boolean type in Rails is one such.</p>

<p>The <code class="highlighter-rouge">boolean</code> type specified in a database migration is represented
differently in different database management systems.</p>

<ul>
  <li>
    <p>Postgresql has a “real” boolean, althought it is actually a tristate
type.</p>
  </li>
  <li>
    <p>MySQL implements boolean as a tinyint, which allows 4 values.</p>
  </li>
  <li>
    <p>Sqlite3 implements boolean as an integer, which is way too many
values.</p>
  </li>
</ul>

<p>Rails comes along and tries to do the right thing in each of these
cases, but in almost all the above, we’re still left with the
possibility of an undefined state, neither <code class="highlighter-rouge">true</code> nor <code class="highlighter-rouge">false</code>. In most
cases, this can be accomodated with “truthiness” and “falsiness”, but
not always, as in the cases where you think you can apply a meaning to
<code class="highlighter-rouge">nil</code> and it whines at you.</p>

<p>In discussions various places, it seems there is no optimal solution
that works in all cases, but a common practice is to set both a
default value <strong>and</strong> disallow nulls in the field, like so:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">add_column</span> <span class="ss">:widgets</span><span class="p">,</span> <span class="ss">:frangible</span><span class="p">,</span> <span class="ss">:boolean</span><span class="p">,</span> <span class="ss">default: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span></code></pre></figure>

<p>Thus making it clear(er) that <code class="highlighter-rouge">frangible</code> on the <code class="highlighter-rouge">Widget</code> model will
only be <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>, and if it isn’t explicitly set, will be
<code class="highlighter-rouge">false</code> by default.</p>

<p>There are cases where tristate or multistate values are useful, but I
feel these should be explicit, perhaps using an <code class="highlighter-rouge">enum</code> if that’s your
choice.</p>

</article>
<hr>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'swaac'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        </main>
      </div>
    </div>
    <!-- <script src="https://apis.google.com/js/plusone.js"></script> -->
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="/js/vendor/bootstrap.js"></script>
<script src="https://use.fontawesome.com/9e3a326427.js"></script>
<script src="/js/main.js"></script>

    

  </body>
</html>
